#include <stdio.h> // standard input and output
#include <stdlib.h> // standard library
#include <time.h> // access to time, manip for rng seed
#include <string.h> // allows for strcmp, strlen, etc.
#include <ctype.h> // can convert upper case to lower and vice versa

const int maxGuesses = 6;
const int wordSize = 6;
char userGuess[6]; 
int correctGuess;
char *wordList[] = { // pointer explanation - insert here
   "hello",
   "sweat",
   "kiosk",
   "avail",
   "cache",
   "magic",
   "salsa",
   "sound",
   "usage",
   "giant",
   "debug",
   "heady",
   "stage",
   "flail",
   "apple",
   "ninth",
   "dance",
   "unlit",
   "tasty",
   "shirk"
}; // words are from past wordle solutions 

int main()
{
srand(time(NULL)); // seed based on current time
int rng = rand() % 20; // random number from 0 to 19
char *chosenWord;
chosenWord = wordList[rng];

printf("%s\n", chosenWord); // printing the chosen word for testing
printf("%s\n", "Guess a word!");

int guessNumber = 0;
char userGuess2[6];
int yellowCount = 0;
char userGuessToCheck[6];
do {
    scanf("%5s", userGuess);
    correctGuess = strcmp(userGuess,chosenWord);
    if (strlen(userGuess) != 5) { // checks if the user input is not a 5 letter word
        printf("Please enter a five letter word.\n");
    }
    else if (correctGuess == 0) { // 0 means that the two strings are the same
        printf("You are correct!\n");
        guessNumber++;
        //printf("%i", guessNumber);
    }
    int frequencyArray[26] = {0};
    for (int i = 0; i < 5; i++) {
     char character = chosenWord[i];
     int index = (int)character % 32; // this converts the character to its alphabetical index
     frequencyArray[index] = frequencyArray[index] + 1;
    }

// then iterate the user's guess and check against it, first for GREEN letters
    for (int j = 0; j < 5; j++) {
      char correctCharacter = chosenWord[j];
      char guessCharacter = userGuess[j];
      int guessIndex = (int)guessCharacter % 32;
      int frequency = frequencyArray[guessIndex];
    
      if (correctCharacter == guessCharacter) {
        // Found GREEN letter
        frequencyArray[guessIndex] = --frequency; // decrement the count to avoid duplicates
        userGuess2[j] = toupper(userGuess[j]);
      } 
      else {
        userGuess2[j] = tolower(userGuess[j]);
      }
    }

// then iterate the user's guess and check against it, for YELLOW/GREY
    for (int k = 0; k < 5; k++) {
      if (isupper(userGuess2[k])) {
        // It's uppercase so it's Green, move to next
        continue;
      }

      char correctCharacter2 = chosenWord[k];
      char guessCharacter2 = userGuess[k];
      int guessIndex2 = (int)guessCharacter2 % 32;
      int frequency2 = frequencyArray[guessIndex2];
    
      if (frequency2 > 0) {
        // Found YELLOW letter
        frequencyArray[guessIndex2] = frequency2--; // decrement the count to avoid duplicate
      } 
      else {
        // Found GREY letter
        userGuess2[k] = '*';
      }
    }

printf("%s\n", userGuess2);
    
}
while(guessNumber <= 5 && correctGuess != 0);

return 0;
}
